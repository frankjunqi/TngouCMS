/*
 * likedown - v1.0.0 - 2015-06-10
 * home: http://likedown.chiki.org/
 * Copyright (c) 2015 XiaoKu Inc. All Rights Reserved.
 */
var Markdown;Markdown="object"==typeof exports&&"function"==typeof require?exports:{},function(){function a(a){return a}function b(){return!1}function c(){}function d(){}c.prototype={chain:function(b,c){var d=this[b];if(!d)throw new Error("unknown hook "+b);this[b]=d===a?c:function(){var a=Array.prototype.slice.call(arguments,0);return a[0]=d.apply(null,a),c.apply(null,a)}},set:function(a,b){if(!this[a])throw new Error("unknown hook "+a);this[a]=b},addNoop:function(b){this[b]=a},addFalse:function(a){this[a]=b}},Markdown.HookCollection=c,d.prototype={set:function(a,b){this["s_"+a]=b},get:function(a){return this["s_"+a]}},Markdown.Converter=function(){function a(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,b,c,d,e,f){return b=b.toLowerCase(),J.set(b,x(c)),e?d:(f&&K.set(b,f.replace(/"/g,"&quot;")),"")})}function b(a){return a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,e),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,e),a=a.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,e),a=a.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,e),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,e)}function e(a,b){var c=b;return c=c.replace(/^\n+/,""),c=c.replace(/\n+$/g,""),c="\n\n~K"+(L.push(c)-1)+"K\n\n"}function f(a,c){a=I.preBlockGamut(a,N),a=n(a);var d="<hr />\n";return a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,d),a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,d),a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,d),a=o(a),a=q(a),a=v(a),a=I.postBlockGamut(a,N),a=b(a),a=w(a,c)}function g(a){return a=I.preSpanGamut(a),a=s(a),a=h(a),a=y(a),a=k(a),a=i(a),a=A(a),a=a.replace(/~P/g,"://"),a=x(a),a=H._DoItalicsAndBold?H._DoItalicsAndBold(a):u(a),a=a.replace(/  +\n/g," <br>\n"),a=I.postSpanGamut(a)}function h(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;return a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=F(b,"!"==a.charAt(1)?"\\`*_/":"\\`*_")})}function i(a){return a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,j),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,j),a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,j)}function j(a,b,c,d,e,f,g,h){void 0==h&&(h="");var i=b,j=c.replace(/:\/\//g,"~P"),k=d.toLowerCase(),m=e,n=h;if(""==m)if(""==k&&(k=j.toLowerCase().replace(/ ?\n/g," ")),m="#"+k,void 0!=J.get(k))m=J.get(k),void 0!=K.get(k)&&(n=K.get(k));else{if(!(i.search(/\(\s*\)$/m)>-1))return i;m=""}m=E(m),m=F(m,"*_");var o='<a href="'+m+'"';return""!=n&&(n=l(n),n=F(n,"*_"),o+=' title="'+n+'"'),o+=">"+j+"</a>"}function k(a){return a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,m),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,m)}function l(a){return a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function m(a,b,c,d,e,f,g,h){var i=b,j=c,k=d.toLowerCase(),m=e,n=h;if(n||(n=""),""==m){if(""==k&&(k=j.toLowerCase().replace(/ ?\n/g," ")),m="#"+k,void 0==J.get(k))return i;m=J.get(k),void 0!=K.get(k)&&(n=K.get(k))}j=F(l(j),"*_[]()"),m=F(m,"*_");var o='<img src="'+m+'" alt="'+j+'"';return n=l(n),n=F(n,"*_"),o+=' title="'+n+'"',o+=" />"}function n(a){return a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return"<h1>"+g(b)+"</h1>\n\n"}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return"<h2>"+g(b)+"</h2>\n\n"}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){var d=b.length;return"<h"+d+">"+g(c)+"</h"+d+">\n\n"})}function o(a,b){a+="~0";var c=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return M?a=a.replace(c,function(a,c,d){var e=c,f=d.search(/[*+-]/g)>-1?"ul":"ol",g=p(e,f,b);return g=g.replace(/\s+$/,""),g="<"+f+">"+g+"</"+f+">\n"}):(c=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(c,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",h=p(f,g);return h=e+"<"+g+">\n"+h+"</"+g+">\n"})),a=a.replace(/~0/,"")}function p(a,b,c){M++,a=a.replace(/\n{2,}$/,"\n"),a+="~0";var d=O[b],e=new RegExp("(^[ \\t]*)("+d+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+d+")[ \\t]+))","gm"),h=!1;return a=a.replace(e,function(a,b,d,e){var i=e,j=/\n\n$/.test(i),k=j||i.search(/\n{2,}/)>-1;return k||h?i=f(C(i),!0):(i=o(C(i),!0),i=i.replace(/\n$/,""),c||(i=g(i))),h=j,"<li>"+i+"</li>\n"}),a=a.replace(/~0/g,""),M--,a}function q(a){return a+="~0",a=a.replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;return d=t(C(d)),d=D(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre><code>"+d+"\n</code></pre>","\n\n"+d+"\n\n"+e}),a=a.replace(/~0/,"")}function r(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(L.push(a)-1)+"K\n\n"}function s(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d){var e=d;return e=e.replace(/^([ \t]*)/g,""),e=e.replace(/[ \t]*$/g,""),e=t(e),e=e.replace(/:\/\//g,"~P"),b+"<code>"+e+"</code>"})}function t(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=F(a,"*_{}[]\\",!1)}function u(a){return a=a.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4"),a=a.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4")}function v(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;return c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=f(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /gm,"~0"),c=c.replace(/~0/g,"")}),r("<blockquote>\n"+c+"\n</blockquote>")})}function w(a,b){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var c=a.split(/\n{2,}/g),d=[],e=/~K(\d+)K/,f=c.length,h=0;f>h;h++){var i=c[h];e.test(i)?d.push(i):/\S/.test(i)&&(i=g(i),i=i.replace(/^([ \t]*)/g,"<p>"),i+="</p>",d.push(i))}if(!b){f=d.length;for(var h=0;f>h;h++)for(var j=!0;j;)j=!1,d[h]=d[h].replace(/~K(\d+)K/g,function(a,b){return j=!0,L[b]})}return d.join("\n\n")}function x(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}function y(a){return a=a.replace(/\\(\\)/g,G),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,G)}function z(a,b,c,d){if(b)return a;if(")"!==d.charAt(d.length-1))return"<"+c+d+">";for(var e=d.match(/[()]/g),f=0,g=0;g<e.length;g++)"("===e[g]?0>=f?f=1:f++:f--;var h="";if(0>f){var i=new RegExp("\\){1,"+-f+"}$");d=d.replace(i,function(a){return h=a,""})}if(h){var j=d.charAt(d.length-1);S.test(j)||(h=j+h,d=d.substr(0,d.length-1))}return"<"+c+d+">"+h}function A(a){a=a.replace(R,z);var b=function(a,b){return'<a href="'+b+'">'+I.plainLinkText(b)+"</a>"};return a=a.replace(/<((https?|ftp):[^'">\s]+)>/gi,b)}function B(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})}function C(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,"")}function D(a){if(!/\t/.test(a))return a;var b,c=["    ","   ","  "," "],d=0;return a.replace(/[\n\t]/g,function(a,e){return"\n"===a?(d=e+1,a):(b=(e-d)%4,d=e+1,c[b])})}function E(a){if(!a)return"";a.length;return a.replace(T,function(a){return"~D"==a?"%24":":"==a?":":"%"+a.charCodeAt(0).toString(16)})}function F(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=new RegExp(d,"g");return a=a.replace(e,G)}function G(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}var H={};this.setOptions=function(a){H=a};var I=this.hooks=new c;I.addNoop("plainLinkText"),I.addNoop("preConversion"),I.addNoop("postNormalization"),I.addNoop("preBlockGamut"),I.addNoop("postBlockGamut"),I.addNoop("preSpanGamut"),I.addNoop("postSpanGamut"),I.addNoop("postConversion");var J,K,L,M;this.makeHtml=function(c){if(J)throw new Error("Recursive call to converter.makeHtml");return J=new d,K=new d,L=[],M=0,c=I.preConversion(c),c=c.replace(/~/g,"~T"),c=c.replace(/\$/g,"~D"),c=c.replace(/\r\n/g,"\n"),c=c.replace(/\r/g,"\n"),c="\n\n"+c+"\n\n",c=D(c),c=c.replace(/^[ \t]+$/gm,""),c=I.postNormalization(c),c=b(c),c=a(c),c=f(c),c=B(c),c=c.replace(/~D/g,"$$"),c=c.replace(/~T/g,"~"),c=I.postConversion(c),L=K=J=null,c};var N=function(a){return f(a)},O={ol:"\\d+[.]",ul:"[*+-]"},P="[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]",Q="[-A-Z0-9+&@#/%=~_|[\\])]",R=new RegExp('(="|<)?\\b(https?|ftp)(://'+P+"*"+Q+")(?=$|\\W)","gi"),S=new RegExp(Q,"i"),T=/(?:["'*()[\]:]|~D)/g}}(),function(){function a(){}function b(a){this.buttonBar=o.getElementById("wmd-button-bar"+a),this.preview=o.getElementById("wmd-preview"+a),this.input=o.getElementById("wmd-input"+a)}function c(a,b){var c,e,f,g=this,h=[],i=0,j="none",k=function(a,b){j!=a&&(j=a,b||n()),s.isIE&&"moving"==j?f=null:e=setTimeout(m,1)},m=function(a){f=new d(b,a),e=void 0};this.setCommandMode=function(){j="command",n(),e=setTimeout(m,0)},this.canUndo=function(){return i>1},this.canRedo=function(){return h[i+1]?!0:!1},this.undo=function(){g.canUndo()&&(c?(c.restore(),c=null):(h[i]=new d(b),h[--i].restore(),a&&a())),j="none",b.input.focus(),m()},this.redo=function(){g.canRedo()&&(h[++i].restore(),a&&a()),j="none",b.input.focus(),m()};var n=function(){var e=f||new d(b);return e?"moving"==j?void(c||(c=e)):(c&&(h[i-1].text!=c.text&&(h[i++]=c),c=null),h[i++]=e,h[i+1]=null,void(a&&a())):!1},o=function(a){var b=!1;if((a.ctrlKey||a.metaKey)&&!a.altKey){var c=a.charCode||a.keyCode,d=String.fromCharCode(c);switch(d.toLowerCase()){case"y":g.redo(),b=!0;break;case"z":a.shiftKey?g.redo():g.undo(),b=!0}}return b?(a.preventDefault&&a.preventDefault(),void(window.event&&(window.event.returnValue=!1))):void 0},p=function(a){if(!a.ctrlKey&&!a.metaKey){var b=a.keyCode;b>=33&&40>=b||b>=63232&&63235>=b?k("moving"):8==b||46==b||127==b?k("deleting"):13==b?k("newlines"):27==b?k("escape"):(16>b||b>20)&&91!=b&&k("typing")}},q=function(){l.addEvent(b.input,"keypress",function(a){!a.ctrlKey&&!a.metaKey||a.altKey||89!=a.keyCode&&90!=a.keyCode||a.preventDefault()});var a=function(){(s.isIE||f&&f.text!=b.input.value)&&void 0==e&&(j="paste",n(),m())};l.addEvent(b.input,"keydown",o),l.addEvent(b.input,"keydown",p),l.addEvent(b.input,"mousedown",function(){k("moving")}),b.input.onpaste=a,b.input.ondrop=a},r=function(){q(),m(!0),n()};r()}function d(b,c){var d=this,e=b.input;this.init=function(){l.isVisible(e)&&(c||!o.activeElement||o.activeElement===e)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=e.scrollTop,(!this.text&&e.selectionStart||0===e.selectionStart)&&(this.text=e.value))},this.setInputAreaSelection=function(){if(l.isVisible(e))if(void 0===e.selectionStart||s.isOpera){if(o.selection){if(o.activeElement&&o.activeElement!==e)return;e.focus();var a=e.createTextRange();a.moveStart("character",-e.value.length),a.moveEnd("character",-e.value.length),a.moveEnd("character",d.end),a.moveStart("character",d.start),a.select()}}else e.focus(),e.selectionStart=d.start,e.selectionEnd=d.end,e.scrollTop=d.scrollTop},this.setInputAreaSelectionStartEnd=function(){if(b.ieCachedRange||!e.selectionStart&&0!==e.selectionStart){if(o.selection){d.text=l.fixEolChars(e.value);var a=b.ieCachedRange||o.selection.createRange(),c=l.fixEolChars(a.text),f="",g=f+c+f;a.text=g;var h=l.fixEolChars(e.value);a.moveStart("character",-g.length),a.text=c,d.start=h.indexOf(f),d.end=h.lastIndexOf(f)-f.length;var i=d.text.length-l.fixEolChars(e.value).length;if(i){for(a.moveStart("character",-c.length);i--;)c+="\n",d.end+=1;a.text=c}b.ieCachedRange&&(d.scrollTop=b.ieCachedScrollTop),b.ieCachedRange=null,this.setInputAreaSelection()}}else d.start=e.selectionStart,d.end=e.selectionEnd},this.restore=function(){void 0!=d.text&&d.text!=e.value&&(e.value=d.text),this.setInputAreaSelection(),e.scrollTop=d.scrollTop},this.getChunks=function(){var b=new a;return b.before=l.fixEolChars(d.text.substring(0,d.start)),b.startTag="",b.selection=l.fixEolChars(d.text.substring(d.start,d.end)),b.endTag="",b.after=l.fixEolChars(d.text.substring(d.end)),b.scrollTop=d.scrollTop,b},this.setChunks=function(a){a.before=a.before+a.startTag,a.after=a.endTag+a.after,this.start=a.before.length,this.end=a.before.length+a.selection.length,this.text=a.before+a.selection+a.after,this.scrollTop=a.scrollTop},this.init()}function e(a,b,c){var d,e,f,g=3e3,h="delayed",i=function(a,b){l.addEvent(a,"input",b),a.onpaste=b,a.ondrop=b,l.addEvent(a,"keypress",b),l.addEvent(a,"keydown",b)},j=function(){var a=0;return window.innerHeight?a=window.pageYOffset:o.documentElement&&o.documentElement.scrollTop?a=o.documentElement.scrollTop:o.body&&(a=o.body.scrollTop),a},k=function(){if(b.preview){var c=b.input.value;if(!c||c!=f){f=c;var d=(new Date).getTime();c=a.makeHtml(c);var g=(new Date).getTime();e=g-d,x(c)}}},n=function(){if(d&&(clearTimeout(d),d=void 0),"manual"!==h){var a=0;"delayed"===h&&(a=e),a>g&&(a=g),d=setTimeout(k,a)}},p=function(a){return a.scrollHeight<=a.clientHeight?1:a.scrollTop/(a.scrollHeight-a.clientHeight)},q=function(){b.preview&&(b.preview.scrollTop=(b.preview.scrollHeight-b.preview.clientHeight)*p(b.preview))};this.refresh=function(a){a?(f="",k()):n()},this.processingTime=function(){return e};var r,t=!0,u=function(a){var c=b.preview,d=c.parentNode,e=c.nextSibling;d.removeChild(c),c.innerHTML=a,e?d.insertBefore(c,e):d.appendChild(c)},v=function(a){b.preview.innerHTML=a},w=function(a){if(r)return r(a);try{v(a),r=v}catch(b){r=u,r(a)}},x=function(a){var d=m.getTop(b.input)-j();if(b.preview&&(w(a),c()),q(),t)return void(t=!1);var e=m.getTop(b.input)-j();s.isIE?setTimeout(function(){window.scrollBy(0,e-d)},0):window.scrollBy(0,e-d)},y=function(){i(b.input,n),k(),b.preview&&(b.preview.scrollTop=0)};y()}function f(a,b,c,e,f,g,h,i){function j(a){if(t.focus(),a.textOp){e&&e.setCommandMode();var b=new d(c);if(!b)return;var g=b.getChunks(),h=function(){t.focus(),g&&b.setChunks(g),b.restore(),f.refresh()},i=a.textOp(g,h);i||h()}a.execute&&a.execute(e)}function k(a,b){var d="0px",e="-20px",f="-40px",g=a.getElementsByTagName("span")[0];b?(g.style.backgroundPosition=a.XShift+" "+d,a.onmouseover=function(){g.style.backgroundPosition=this.XShift+" "+f},a.onmouseout=function(){g.style.backgroundPosition=this.XShift+" "+d},s.isIE&&(a.onmousedown=function(){o.activeElement&&o.activeElement!==c.input||(c.ieCachedRange=document.selection.createRange(),c.ieCachedScrollTop=c.input.scrollTop)}),a.isHelp||(a.onclick=function(){return this.onmouseout&&this.onmouseout(),j(this),!1})):(g.style.backgroundPosition=a.XShift+" "+e,a.onmouseover=a.onmouseout=a.onclick=function(){})}function m(a){return"string"==typeof a&&(a=g[a]),function(){a.apply(g,arguments)}}function n(){var d=c.buttonBar,e=document.createElement("ul");e.id="wmd-button-right-row"+b,e.className="wmd-button-row",e=d.appendChild(e);var f=function(a,c,d,f){var g=document.createElement("li");g.className="wmd-button pull-right "+a;var h=document.createElement("span");return g.id=a+b,g.appendChild(h),g.title=c,g.XShift=d,f&&(g.textOp=f),k(g,!0),e.appendChild(g),g},g=function(a){var c=document.createElement("li");c.className="wmd-spacer wmd-right-spacer"+a+" pull-right",c.id="wmd-right-spacer"+a+b,e.appendChild(c)};u.previewMode=f("wmd-preview-mode-button",i("previewMode"),"-360px"),u.previewMode.execute=m(function(){return this.doMode(a,"preview-mode")}),u.liveMode=f("wmd-live-mode-button",i("liveMode"),"-340px"),u.liveMode.execute=m(function(){return this.doMode(a,"live-mode")}),u.editMode=f("wmd-edit-mode-button",i("editMode"),"-320px"),u.editMode.execute=m(function(){return this.doMode(a,"edit-mode")}),g(1),u.fullscreen=f("wmd-fullscreen-button",i("fullscreen"),"-240px"),u.fullscreen.execute=m(function(){return this.doFullScreen(a,u)})}function p(){var a=c.buttonBar,d=document.createElement("ul");d.id="wmd-button-row"+b,d.className="wmd-button-row",d=a.appendChild(d);var e=0,f=function(a,c,f,g){var h=document.createElement("li");h.className="wmd-button",h.style.left=e+"px",e+=25;var i=document.createElement("span");return h.id=a+b,h.appendChild(i),h.title=c,h.XShift=f,g&&(h.textOp=g),k(h,!0),d.appendChild(h),h},g=function(a){var c=document.createElement("li");c.className="wmd-spacer wmd-spacer"+a,c.id="wmd-spacer"+a+b,d.appendChild(c),e+=25};u.bold=f("wmd-bold-button",i("bold"),"0px",m("doBold")),u.italic=f("wmd-italic-button",i("italic"),"-20px",m("doItalic")),g(1),u.link=f("wmd-link-button",i("link"),"-40px",m(function(a,b){return this.doLinkOrImage(a,b,!1)})),u.quote=f("wmd-quote-button",i("quote"),"-60px",m("doBlockquote")),u.code=f("wmd-code-button",i("code"),"-80px",m("doCode")),u.image=f("wmd-image-button",i("image"),"-100px",m(function(a,b){return this.doLinkOrImage(a,b,!0)})),g(2),u.olist=f("wmd-olist-button",i("olist"),"-120px",m(function(a,b){this.doList(a,b,!0)})),u.ulist=f("wmd-ulist-button",i("ulist"),"-140px",m(function(a,b){this.doList(a,b,!1)})),u.heading=f("wmd-heading-button",i("heading"),"-160px",m("doHeading")),u.hr=f("wmd-hr-button",i("hr"),"-180px",m("doHorizontalRule")),g(3),u.undo=f("wmd-undo-button",i("undo"),"-200px",null),u.undo.execute=function(a){a&&a.undo()};var j=i(/win/.test(q.platform.toLowerCase())?"redo":"redomac");if(u.redo=f("wmd-redo-button",j,"-220px",null),u.redo.execute=function(a){a&&a.redo()},h){var l=document.createElement("li"),n=document.createElement("span");l.appendChild(n),l.className="wmd-button wmd-help-button",l.id="wmd-help-button"+b,l.XShift="-300px",l.isHelp=!0,l.style.right="0px",l.title=i("help"),l.onclick=h.handler,k(l,!0),d.appendChild(l),u.help=l}r()}function r(){e&&(k(u.undo,e.canUndo()),k(u.redo,e.canRedo()))}var t=c.input,u={};n(),p();var v="keydown";s.isOpera&&(v="keypress"),l.addEvent(t,v,function(a){if((a.ctrlKey||a.metaKey)&&!a.altKey&&!a.shiftKey){var b=a.charCode||a.keyCode,c=String.fromCharCode(b).toLowerCase();switch(c){case"b":j(u.bold);break;case"i":j(u.italic);break;case"l":j(u.link);break;case"q":j(u.quote);break;case"k":j(u.code);break;case"g":j(u.image);break;case"o":j(u.olist);break;case"u":j(u.ulist);break;case"j":j(u.fullscreen);break;case"h":j(u.heading);break;case"r":j(u.hr);break;case"y":j(u.redo);break;case"z":j(a.shiftKey?u.redo:u.undo);break;default:return}a.preventDefault&&a.preventDefault(),window.event&&(window.event.returnValue=!1)}}),l.addEvent(t,"keyup",function(a){if(a.shiftKey&&!a.ctrlKey&&!a.metaKey){var b=a.charCode||a.keyCode;if(13===b){var c={};c.textOp=m("doAutoindent"),j(c)}}}),s.isIE&&l.addEvent(t,"keydown",function(a){var b=a.keyCode;return 27===b?!1:void 0}),this.setUndoRedoButtonStates=r}function g(a,b){this.hooks=a,this.getString=b}function h(a){return a.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(a,b,c){var d=!1;return b=b.replace(/%(?:[\da-fA-F]{2})|\?|\+|[^\w\d-./[\]]/g,function(a){if(3===a.length&&"%"==a.charAt(0))return a.toUpperCase();switch(a){case"?":return d=!0,"?";case"+":if(d)return"%20"}return encodeURI(a)}),c&&(c=c.trim?c.trim():c.replace(/^\s*/,"").replace(/\s*$/,""),c=c.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),c?b+' "'+c+'"':b})}function i(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))}function j(a,b){i(a,b)||(a.className+=" "+b)}function k(a,b){if(i(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}}var l={},m={},n={},o=window.document,p=window.RegExp,q=window.navigator,r={lineLength:72},s={isIE:/msie/.test(q.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(q.userAgent.toLowerCase())||/msie 5/.test(q.userAgent.toLowerCase()),isOpera:/opera/.test(q.userAgent.toLowerCase())},t={bold:"Strong <strong> Ctrl+B",boldexample:"strong text",italic:"Emphasis <em> Ctrl+I",italicexample:"emphasized text",link:"Hyperlink <a> Ctrl+L",linkdescription:"enter link description here",linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',quote:"Blockquote <blockquote> Ctrl+Q",quoteexample:"Blockquote",code:"Code Sample <pre><code> Ctrl+K",codeexample:"enter code here",image:"Image <img> Ctrl+G",imagedescription:"enter image description here",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",olist:"Numbered List <ol> Ctrl+O",ulist:"Bulleted List <ul> Ctrl+U",litem:"List item",heading:"Heading <h1>/<h2> Ctrl+H",headingexample:"Heading",hr:"Horizontal Rule <hr> Ctrl+R",undo:"Undo - Ctrl+Z",redo:"Redo - Ctrl+Y",redomac:"Redo - Ctrl+Shift+Z",help:"Markdown Editing Help"},u="http://",v="http://";Markdown.Editor=function(a,d,h){h=h||{},"function"==typeof h.handler&&(h={helpButton:h}),h.strings=h.strings||{},h.helpButton&&(h.strings.help=h.strings.help||h.helpButton.title);var i=function(a){return h.strings[a]||t[a]};d=d||"";var j=this.hooks=new Markdown.HookCollection;j.addNoop("onPreviewRefresh"),j.addNoop("postBlockquoteCreation"),j.addFalse("insertImageDialog"),j.addFalse("insertLinkDialog"),this.getConverter=function(){return a};var k,l=this;this.editor=document.getElementById("wmd-editor"+d),this.run=function(){if(!k){k=new b(d);var m,n,p=new g(j,i),q=new e(a,k,function(){j.onPreviewRefresh()});/\?noundo/.test(o.location.href)||(m=new c(function(){q.refresh(),n&&n.setUndoRedoButtonStates()},k),this.textOperation=function(a){m.setCommandMode(),a(),l.refreshPreview()}),n=new f(this.editor,d,k,m,q,p,h.helpButton,i),n.setUndoRedoButtonStates();var r=l.refreshPreview=function(){q.refresh(!0)};r()}}},a.prototype.findTags=function(a,b){var c,d=this;a&&(c=l.extendRegExp(a,"","$"),this.before=this.before.replace(c,function(a){return d.startTag=d.startTag+a,""}),c=l.extendRegExp(a,"^",""),this.selection=this.selection.replace(c,function(a){return d.startTag=d.startTag+a,""})),b&&(c=l.extendRegExp(b,"","$"),this.selection=this.selection.replace(c,function(a){return d.endTag=a+d.endTag,""}),c=l.extendRegExp(b,"^",""),this.after=this.after.replace(c,function(a){return d.endTag=a+d.endTag,""}))},a.prototype.trimWhitespace=function(a){var b,c,d=this;a?b=c="":(b=function(a){return d.before+=a,""},c=function(a){return d.after=a+d.after,""}),this.selection=this.selection.replace(/^(\s*)/,b).replace(/(\s*)$/,c)},a.prototype.skipLines=function(a,b,c){void 0===a&&(a=1),void 0===b&&(b=1),a++,b++;var d,e;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+p.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+p.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+p.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+p.$1,this.before){for(d=e="";a--;)d+="\\n?",e+="\n";c&&(d="\\n*"),this.before=this.before.replace(new p(d+"$",""),e)}if(this.after){for(d=e="";b--;)d+="\\n?",e+="\n";c&&(d="\\n*"),this.after=this.after.replace(new p(d,""),e)}},l.isVisible=function(a){return window.getComputedStyle?"none"!==window.getComputedStyle(a,null).getPropertyValue("display"):a.currentStyle?"none"!==a.currentStyle.display:void 0},l.addEvent=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},l.removeEvent=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},l.fixEolChars=function(a){return a=a.replace(/\r\n/g,"\n"),a=a.replace(/\r/g,"\n")},l.extendRegExp=function(a,b,c){(null===b||void 0===b)&&(b=""),(null===c||void 0===c)&&(c="");var d,e=a.toString();return e=e.replace(/\/([gim]*)$/,function(a,b){return d=b,""}),e=e.replace(/(^\/|\/$)/g,""),e=b+e+c,new p(e,d)},m.getTop=function(a,b){var c=a.offsetTop;if(!b)for(;a=a.offsetParent;)c+=a.offsetTop;return c},m.getHeight=function(a){return a.offsetHeight||a.scrollHeight},m.getWidth=function(a){return a.offsetWidth||a.scrollWidth},m.getPageSize=function(){var a,b,c,d;self.innerHeight&&self.scrollMaxY?(a=o.body.scrollWidth,b=self.innerHeight+self.scrollMaxY):o.body.scrollHeight>o.body.offsetHeight?(a=o.body.scrollWidth,b=o.body.scrollHeight):(a=o.body.offsetWidth,b=o.body.offsetHeight),self.innerHeight?(c=self.innerWidth,d=self.innerHeight):o.documentElement&&o.documentElement.clientHeight?(c=o.documentElement.clientWidth,d=o.documentElement.clientHeight):o.body&&(c=o.body.clientWidth,d=o.body.clientHeight);var e=Math.max(a,c),f=Math.max(b,d);return[e,f,c,d]},n.createBackground=function(){var a=o.createElement("div"),b=a.style;a.className="wmd-prompt-background",b.position="absolute",b.top="0",b.zIndex="1000",s.isIE?b.filter="alpha(opacity=50)":b.opacity="0.5";var c=m.getPageSize();return b.height=c[1]+"px",s.isIE?(b.left=o.documentElement.scrollLeft,b.width=o.documentElement.clientWidth):(b.left="0",b.width="100%"),o.body.appendChild(a),a},n.prompt=function(a,b,c){var d,e;void 0===b&&(b="");var f=function(a){var b=a.charCode||a.keyCode;return 27===b?(a.stopPropagation&&a.stopPropagation(),g(!0),!1):void 0},g=function(a){l.removeEvent(o.body,"keyup",f);var b=e.value;return a?b=null:(b=b.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(b)||(b="http://"+b)),d.parentNode.removeChild(d),c(b),!1},h=function(){d=o.createElement("div"),d.className="wmd-prompt-dialog",d.style.padding="10px;",d.style.position="fixed",d.style.width="400px",d.style.zIndex="1001";var c=o.createElement("div");c.innerHTML=a,c.style.padding="5px",d.appendChild(c);var h=o.createElement("form"),i=h.style;h.onsubmit=function(){return g(!1)},i.padding="0",i.margin="0",i.cssFloat="left",i.width="100%",i.textAlign="center",i.position="relative",d.appendChild(h),e=o.createElement("input"),e.type="text",e.value=b,i=e.style,i.display="block",i.width="80%",i.marginLeft=i.marginRight="auto",h.appendChild(e);var j=o.createElement("input");j.type="button",j.onclick=function(){return g(!1)},j.value="OK",i=j.style,i.margin="10px",i.display="inline",i.width="7em";var k=o.createElement("input");k.type="button",k.onclick=function(){return g(!0)},k.value="Cancel",i=k.style,i.margin="10px",i.display="inline",i.width="7em",h.appendChild(j),h.appendChild(k),l.addEvent(o.body,"keyup",f),d.style.top="50%",d.style.left="50%",d.style.display="block",s.isIE_5or6&&(d.style.position="absolute",d.style.top=o.documentElement.scrollTop+200+"px",d.style.left="50%"),o.body.appendChild(d),d.style.marginTop=-(m.getHeight(d)/2)+"px",d.style.marginLeft=-(m.getWidth(d)/2)+"px"};setTimeout(function(){h();var a=b.length;if(void 0!==e.selectionStart)e.selectionStart=0,e.selectionEnd=a;else if(e.createTextRange){var c=e.createTextRange();c.collapse(!1),c.moveStart("character",-a),c.moveEnd("character",a),c.select()}e.focus()},0)};var w=g.prototype;w.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",w.unwrap=function(a){var b=new p("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");a.selection=a.selection.replace(b,"$1 $2")},w.wrap=function(a,b){this.unwrap(a);var c=new p("(.{1,"+b+"})( +|$\\n?)","gm"),d=this;a.selection=a.selection.replace(c,function(a,b){return new p("^"+d.prefixes,"").test(a)?a:b+"\n"}),a.selection=a.selection.replace(/\s+$/,"")},w.doBold=function(a,b){return this.doBorI(a,b,2,this.getString("boldexample"))},w.doItalic=function(a,b){return this.doBorI(a,b,1,this.getString("italicexample"))},w.doBorI=function(a,b,c,d){a.trimWhitespace(),a.selection=a.selection.replace(/\n{2,}/g,"\n");var e=/(\**$)/.exec(a.before)[0],f=/(^\**)/.exec(a.after)[0],g=Math.min(e.length,f.length);if(g>=c&&(2!=g||1!=c))a.before=a.before.replace(p("[*]{"+c+"}$",""),""),a.after=a.after.replace(p("^[*]{"+c+"}",""),"");else if(!a.selection&&f){a.after=a.after.replace(/^([*_]*)/,""),a.before=a.before.replace(/(\s?)$/,"");var h=p.$1;a.before=a.before+f+h}else{a.selection||f||(a.selection=d);var i=1>=c?"*":"**";a.before=a.before+i,a.after=i+a.after}},w.stripLinkDefs=function(a,b){return a=a.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(a,c,d,e,f){return b[c]=a.replace(/\s*$/,""),e?(b[c]=a.replace(/["(](.+?)[")]$/,""),e+f):""})},w.addLinkDef=function(a,b){var c=0,d={};a.before=this.stripLinkDefs(a.before,d),a.selection=this.stripLinkDefs(a.selection,d),a.after=this.stripLinkDefs(a.after,d);var e="",f=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,g=function(a){c++,a=a.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+c+"]:"),e+="\n"+a},h=function(a,b,e,i,j,k){return e=e.replace(f,h),d[j]?(g(d[j]),b+e+i+c+k):a};a.before=a.before.replace(f,h),b?g(b):a.selection=a.selection.replace(f,h);var i=c;return a.after=a.after.replace(f,h),a.after&&(a.after=a.after.replace(/\n*$/,"")),a.after||(a.selection=a.selection.replace(/\n*$/,"")),a.after+="\n\n"+e,i},w.doLinkOrImage=function(a,b,c){a.trimWhitespace(),a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var d;if(!(a.endTag.length>1&&a.startTag.length>0)){if(a.selection=a.startTag+a.selection+a.endTag,a.startTag=a.endTag="",/\n\n/.test(a.selection))return void this.addLinkDef(a,null);var e=this,f=function(f){if(d.parentNode.removeChild(d),null!==f){a.selection=(" "+a.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var g=" [999]: "+h(f),i=e.addLinkDef(a,g);a.startTag=c?"![":"[",a.endTag="]["+i+"]",a.selection||(a.selection=e.getString(c?"imagedescription":"linkdescription"))}b()};return d=n.createBackground(),c?this.hooks.insertImageDialog(f)||n.prompt(this.getString("imagedialog"),u,f):this.hooks.insertLinkDialog(f)||n.prompt(this.getString("linkdialog"),v,f),!0}a.startTag=a.startTag.replace(/!?\[/,""),a.endTag="",this.addLinkDef(a,null)},w.doAutoindent=function(a){var b=this,c=!1;a.before=a.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),a.before=a.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),a.before=a.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),a.selection||/^[ \t]*(?:\n|$)/.test(a.after)||(a.after=a.after.replace(/^[^\n]*/,function(b){return a.selection=b,""}),c=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(a.before)&&b.doList&&b.doList(a),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(a.before)&&b.doBlockquote&&b.doBlockquote(a),/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&b.doCode&&b.doCode(a),c&&(a.after=a.selection+a.after,a.selection="")},w.doBlockquote=function(a){a.selection=a.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(b,c,d,e){return a.before+=c,a.after=e+a.after,d}),a.before=a.before.replace(/(>[ \t]*)$/,function(b,c){return a.selection=c+a.selection,""}),a.selection=a.selection.replace(/^(\s|>)+$/,""),a.selection=a.selection||this.getString("quoteexample");var b,c="",d="";if(a.before){for(var e=a.before.replace(/\n$/,"").split("\n"),f=!1,g=0;g<e.length;g++){var h=!1;b=e[g],f=f&&b.length>0,/^>/.test(b)?(h=!0,!f&&b.length>1&&(f=!0)):h=/^[ \t]*$/.test(b)?!0:f,h?c+=b+"\n":(d+=c+b,c="\n")}/(^|\n)>/.test(c)||(d+=c,c="")}a.startTag=c,a.before=d,a.after&&(a.after=a.after.replace(/^\n?/,"\n")),a.after=a.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(b){return a.endTag=b,""});var i=function(b){var c=b?"> ":"";a.startTag&&(a.startTag=a.startTag.replace(/\n((>|\s)*)\n$/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"})),a.endTag&&(a.endTag=a.endTag.replace(/^\n((>|\s)*)\n/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}))};/^(?![ ]{0,3}>)/m.test(a.selection)?(this.wrap(a,r.lineLength-2),a.selection=a.selection.replace(/^/gm,"> "),i(!0),a.skipLines()):(a.selection=a.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(a),i(!1),!/^(\n|^)[ ]{0,3}>/.test(a.selection)&&a.startTag&&(a.startTag=a.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(a.selection)&&a.endTag&&(a.endTag=a.endTag.replace(/^\n{0,2}/,"\n\n"))),a.selection=this.hooks.postBlockquoteCreation(a.selection),/\n/.test(a.selection)||(a.selection=a.selection.replace(/^(> *)/,function(b,c){return a.startTag+=c,""
}))},w.doCode=function(a){var b=/\S[ ]*$/.test(a.before),c=/^[ ]*\S/.test(a.after);if(!c&&!b||/\n/.test(a.selection)){a.before=a.before.replace(/[ ]{4}$/,function(b){return a.selection=b+a.selection,""});var d=1,e=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&(d=0),/^\n(\t|[ ]{4,})/.test(a.after)&&(e=0),a.skipLines(d,e),a.selection?/^[ ]{0,3}\S/m.test(a.selection)?/\n/.test(a.selection)?a.selection=a.selection.replace(/^/gm,"    "):a.before+="    ":a.selection=a.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(a.startTag="    ",a.selection=this.getString("codeexample"))}else a.trimWhitespace(),a.findTags(/`/,/`/),a.startTag||a.endTag?a.endTag&&!a.startTag?(a.before+=a.endTag,a.endTag=""):a.startTag=a.endTag="":(a.startTag=a.endTag="`",a.selection||(a.selection=this.getString("codeexample")))},w.doList=function(a,b,c){var d=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,e=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,f="-",g=1,h=function(){var a;return c?(a=" "+g+". ",g++):a=" "+f+" ",a},i=function(a){return void 0===c&&(c=/^\s*\d/.test(a)),a=a.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return h()})};if(a.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!a.before||/\n$/.test(a.before)||/^\n/.test(a.startTag)||(a.before+=a.startTag,a.startTag=""),a.startTag){var j=/\d+[.]/.test(a.startTag);if(a.startTag="",a.selection=a.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(a),a.skipLines(),j&&(a.after=a.after.replace(e,i)),c==j)return}var k=1;a.before=a.before.replace(d,function(a){return/^\s*([*+-])/.test(a)&&(f=p.$1),k=/[^\n]\n\n[^\n]/.test(a)?1:0,i(a)}),a.selection||(a.selection=this.getString("litem"));var l=h(),m=1;a.after=a.after.replace(e,function(a){return m=/[^\n]\n\n[^\n]/.test(a)?1:0,i(a)}),a.trimWhitespace(!0),a.skipLines(k,m,!0),a.startTag=l;var n=l.replace(/./g," ");this.wrap(a,r.lineLength-n.length),a.selection=a.selection.replace(/\n/g,"\n"+n)},w.doHeading=function(a){if(a.selection=a.selection.replace(/\s+/g," "),a.selection=a.selection.replace(/(^\s+|\s+$)/g,""),!a.selection)return a.startTag="## ",a.selection=this.getString("headingexample"),void(a.endTag=" ##");var b=0;a.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(a.startTag)&&(b=p.lastMatch.length),a.startTag=a.endTag="",a.findTags(null,/\s?(-+|=+)/),/=+/.test(a.endTag)&&(b=1),/-+/.test(a.endTag)&&(b=2),a.startTag=a.endTag="",a.skipLines(1,1);var c=0==b?2:b-1;if(c>0){var d=c>=2?"-":"=",e=a.selection.length;for(e>r.lineLength&&(e=r.lineLength),a.endTag="\n";e--;)a.endTag+=d}},w.doHorizontalRule=function(a){a.startTag="----------\n",a.selection="",a.skipLines(2,1,!0)},w.doFullScreen=function(a,b){var c="fullscreen";i(a,c)?(k(a,c),b.fullscreen.XShift="-240px"):(j(a,c),b.fullscreen.XShift="-260px")},w.doMode=function(a,b){k(a,"preview-mode"),k(a,"live-mode"),k(a,"edit-mode"),j(a,b)}}(),function(){function a(a){return a.replace(/^\s+|\s+$/g,"")}function b(a){return a.replace(/\s+$/g,"")}function c(a){return a.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function d(a,b){return-1!=a.indexOf(b)}function e(a,b){return a.replace(/<[^>]*>?/gi,function(a){return a.match(b)?a:""})}function f(a,b){for(var c={},d=0;d<a.length;d++)c[a[d]]=a[d];for(d=0;d<b.length;d++)c[b[d]]=b[d];var e=[];for(var f in c)c.hasOwnProperty(f)&&e.push(c[f]);return e}function g(a){return""!=a.charAt(0)&&(a=""+a),""!=a.charAt(a.length-1)&&(a+=""),a}function h(a){return""==a.charAt(0)&&(a=a.substr(1)),""==a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),a}function i(a,b){return e(j(a,b),p)}function j(a,b){var c=b.blockGamutHookCallback(a);return c=m(c),c=c.replace(/~D/g,"$$").replace(/~T/g,"~"),c=b.previousPostConversion(c)}function k(a){return a.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}function l(a){return a.replace(/~I/g,"|").replace(/~i/g,":")}function m(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})}function n(a){return a.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function o(a,b){var c=b;return c=c.replace(/&\#8220;/g,'"'),c=c.replace(/&\#8221;/g,'"'),c=c.replace(/&\#8216;/g,"'"),c=c.replace(/&\#8217;/g,"'"),c=c.replace(/&\#8212;/g,"---"),c=c.replace(/&\#8211;/g,"--"),c=c.replace(/&\#8230;/g,"...")}var p=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1}),Markdown.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.tableClass="",this.tabWidth=4},Markdown.Extra.init=function(a,b){var c=new Markdown.Extra,e=[],f=[],g=[],h=["unHashExtraBlocks"];return b=b||{},b.extensions=b.extensions||["all"],d(b.extensions,"all")&&(b.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","smartypants","strikethrough","newlines"]),f.push("wrapHeaders"),d(b.extensions,"attr_list")&&(e.push("hashFcbAttributeBlocks"),f.push("hashHeaderAttributeBlocks"),h.push("applyAttributeBlocks"),c.attributeBlocks=!0),d(b.extensions,"fenced_code_gfm")&&(f.push("fencedCodeBlocks"),e.push("fencedCodeBlocks")),d(b.extensions,"tables")&&f.push("tables"),d(b.extensions,"def_list")&&f.push("definitionLists"),d(b.extensions,"footnotes")&&(e.push("stripFootnoteDefinitions"),f.push("doFootnotes"),h.push("printFootnotes")),d(b.extensions,"smartypants")&&h.push("runSmartyPants"),d(b.extensions,"strikethrough")&&g.push("strikethrough"),d(b.extensions,"newlines")&&g.push("newlines"),a.hooks.chain("postNormalization",function(a){return c.doTransform(e,a)+"\n"}),a.hooks.chain("preBlockGamut",function(a,b){return c.blockGamutHookCallback=b,a=k(a),a=c.doTransform(f,a)+"\n",a=l(a)}),a.hooks.chain("postSpanGamut",function(a){return c.doTransform(g,a)}),c.previousPostConversion=a.hooks.postConversion,a.hooks.chain("postConversion",function(a){return a=c.doTransform(h,a),c.hashBlocks=[],c.footnotes={},c.usedFootnotes=[],a}),"highlighter"in b&&(c.googleCodePrettify="prettify"===b.highlighter,c.highlightJs="highlight"===b.highlighter),"table_class"in b&&(c.tableClass=b.table_class),c.converter=a,c},Markdown.Extra.prototype.doTransform=function(a,b){for(var c=0;c<a.length;c++)b=this[a[c]](b);return b},Markdown.Extra.prototype.hashExtraBlock=function(a){return"\n<p>~X"+(this.hashBlocks.push(a)-1)+"X</p>\n"},Markdown.Extra.prototype.hashExtraInline=function(a){return"~X"+(this.hashBlocks.push(a)-1)+"X"},Markdown.Extra.prototype.unHashExtraBlocks=function(a){function b(){var d=!1;a=a.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(a,b){d=!0;var e=parseInt(b,10);return c.hashBlocks[e]}),d===!0&&b()}var c=this;return b(),a},Markdown.Extra.prototype.wrapHeaders=function(a){function b(a){return"\n"+a+"\n"}return a=a.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,b),a=a.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,b),a=a.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,b)};var q="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",r=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+q+"[ \\t]*(?:\\n|0x03)","gm"),s=new RegExp("^(.*)[ \\t]+"+q+"[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),t=new RegExp("^(```[^`\\n]*)[ \\t]+"+q+"[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");Markdown.Extra.prototype.hashHeaderAttributeBlocks=function(a){function b(a,b,d){return"<p>~XX"+(c.hashBlocks.push(d)-1)+"XX</p>\n"+b+"\n"}var c=this;return a=a.replace(r,b),a=a.replace(s,b)},Markdown.Extra.prototype.hashFcbAttributeBlocks=function(a){function b(a,b,d){return"<p>~XX"+(c.hashBlocks.push(d)-1)+"XX</p>\n"+b+"\n"}var c=this;return a.replace(t,b)},Markdown.Extra.prototype.applyAttributeBlocks=function(a){var b=this,c=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return a=a.replace(c,function(a,c,d,e,g){if(!d)return"";for(var h=parseInt(c,10),i=b.hashBlocks[h],j=i.match(/#[^\s#.]+/g)||[],k=j[0]?' id="'+j[0].substr(1,j[0].length-1)+'"':"",l=i.match(/\.[^\s#.]+/g)||[],m=0;m<l.length;m++)l[m]=l[m].substr(1,l[m].length-1);var n="";return e&&(l=f(l,[e])),l.length>0&&(n=' class="'+l.join(" ")+'"'),"<"+d+k+n+g})},Markdown.Extra.prototype.tables=function(b){function c(b,c,e,f){c=c.replace(/^ *[|]/m,""),e=e.replace(/^ *[|]/m,""),f=f.replace(/^ *[|]/gm,""),c=c.replace(/[|] *$/m,""),e=e.replace(/[|] *$/m,""),f=f.replace(/[|] *$/gm,""),alignspecs=e.split(/ *[|] */),align=[];for(var g=0;g<alignspecs.length;g++){var h=alignspecs[g];align[g]=h.match(/^ *-+: *$/m)?' align="right"':h.match(/^ *:-+: *$/m)?' align="center"':h.match(/^ *:-+ *$/m)?' align="left"':""}var j=c.split(/ *[|] */),k=j.length,l=d.tableClass?' class="'+d.tableClass+'"':"",m=["<table",l,">\n","<thead>\n","<tr>\n"].join("");for(g=0;k>g;g++){var n=i(a(j[g]),d);m+=["  <th",align[g],">",n,"</th>\n"].join("")}m+="</tr>\n</thead>\n";var o=f.split("\n");for(g=0;g<o.length;g++)if(!o[g].match(/^\s*$/)){for(var p=o[g].split(/ *[|] */),q=k-p.length,r=0;q>r;r++)p.push("");for(m+="<tr>\n",r=0;k>r;r++){var s=i(a(p[r]),d);m+=["  <td",align[r],">",s,"</td>\n"].join("")}m+="</tr>\n"}return m+="</table>\n",d.hashExtraBlock(m)}var d=this,e=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),f=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");return b=b.replace(e,c),b=b.replace(f,c)},Markdown.Extra.prototype.stripFootnoteDefinitions=function(a){var b=this;return a=a.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(a,c,d){return c=n(c),d+="\n",d=d.replace(/^[ ]{0,3}/g,""),b.footnotes[c]=d,"\n"})},Markdown.Extra.prototype.doFootnotes=function(a){var b=this;if(b.isConvertingFootnote===!0)return a;var c=0;return a=a.replace(/\[\^(.+?)\]/g,function(a,d){var e=n(d),f=b.footnotes[e];if(void 0===f)return a;c++,b.usedFootnotes.push(e);var g='<a href="#fn:'+e+'" id="fnref:'+e+'" title="See footnote" class="footnote">'+c+"</a>";return b.hashExtraInline(g)})},Markdown.Extra.prototype.printFootnotes=function(a){var b=this;if(0===b.usedFootnotes.length)return a;a+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var c=0;c<b.usedFootnotes.length;c++){var d=b.usedFootnotes[c],e=b.footnotes[d];b.isConvertingFootnote=!0;var f=i(e,b);delete b.isConvertingFootnote,a+='<li id="fn:'+d+'">'+f+' <a href="#fnref:'+d+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return a+="</ol>\n</div>"},Markdown.Extra.prototype.fencedCodeBlocks=function(b){function c(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/~D/g,"$$"),a=a.replace(/~T/g,"~")}var d=this;return b=b.replace(/(?:^|\n)```([^`\n]*)\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(b,e,f){var g=a(e),h=f,i=d.googleCodePrettify?' class="prettyprint"':"",j="";g&&(j=d.googleCodePrettify||d.highlightJs?' class="language-'+g+'"':' class="'+g+'"');var k=["<pre",i,"><code",j,">",c(h),"</code></pre>"].join("");return d.hashExtraBlock(k)})},Markdown.Extra.prototype.educatePants=function(a){var b=this,c="",d=0;a.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(e,f,g,h,i,j,k){var l=a.substring(d,k);return c+=b.applyPants(l),b.smartyPantsLastChar=c.substring(c.length-1),d=k+e.length,f?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(g)?b.smartyPantsLastChar=i.substring(i.length-1):i=b.educatePants(i),void(c+=f+g+h+i+j)):void(c+=e)});var e=a.substring(d);return c+=b.applyPants(e),b.smartyPantsLastChar=c.substring(c.length-1),c},Markdown.Extra.prototype.applyPants=function(a){return a=a.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;"),a=a.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;"),a=a.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;"),/^'$/.test(a)?/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;":/^"$/.test(a)?/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;":(a=a.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;"),a=a.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;"),a=a.replace(/"'(?=\w)/g,"&#8220;&#8216;"),a=a.replace(/'"(?=\w)/g,"&#8216;&#8220;"),a=a.replace(/'(?=\d{2}s)/g,"&#8217;"),a=a.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;"),a=a.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;"),a=a.replace(/'(?=\s|s\b)/g,"&#8217;"),a=a.replace(/'/g,"&#8216;"),a=a.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;"),a=a.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;"),a=a.replace(/"(?=\s)/g,"&#8221;"),a=a.replace(/"/gi,"&#8220;"))},Markdown.Extra.prototype.runSmartyPants=function(a){return this.smartyPantsLastChar="",a=this.educatePants(a),a=a.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,o)},Markdown.Extra.prototype.definitionLists=function(b){var c=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),d=this;return b=g(b),b=b.replace(c,function(b,c,e){var f=a(d.processDefListItems(e));return f="<dl>\n"+f+"\n</dl>",c+d.hashExtraBlock(f)+"\n\n"}),h(b)},Markdown.Extra.prototype.processDefListItems=function(d){var e=this,f=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),k=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");return d=g(d),d=d.replace(/\n{2,}(?=\\x03)/,"\n"),d=d.replace(f,function(b,c,d){for(var f=a(d).split("\n"),g="",h=0;h<f.length;h++){var j=f[h];j=i(a(j),e),g+="\n<dt>"+j+"</dt>"}return g+"\n"}),d=d.replace(k,function(a,d,f,g){return d||g.match(/\n{2,}/)?(g=Array(f.length+1).join(" ")+g,g=c(g)+"\n\n",g="\n"+j(g,e)+"\n"):(g=b(g),g=i(c(g),e)),"\n<dd>"+g+"</dd>\n"}),h(d)},Markdown.Extra.prototype.strikethrough=function(a){return a.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")},Markdown.Extra.prototype.newlines=function(a){return a.replace(/(<(?:br|\/li)>)?\n/g,function(a,b){return b?a:" <br>\n"})}}(),function(){function a(a,b,c){var d=i.slice(a,b+1).join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");for(r.Browser.isMSIE&&(d=d.replace(/(%[^\n]*)\n/g,"$1<br/>\n"));b>a;)i[b]="",b--;i[a]="@@"+n.length+"@@",c&&(d=c(d)),n.push(d),j=k=l=null}function b(b){j=k=l=null,n=[];var c;/`/.test(b)?(b=b.replace(/~/g,"~T").replace(/(^|[^\\])(`+)([^\n]*?[^`\n])\2(?!`)/gm,function(a){return a.replace(/\$/g,"~D")}),c=function(a){return a.replace(/~([TD])/g,function(a,b){return{T:"~",D:"$"}[b]})}):c=function(a){return a},i=s(b.replace(/\r\n?/g,"\n"),t);for(var d=1,e=i.length;e>d;d+=2){var f=i[d];"@"===f.charAt(0)?(i[d]="@@"+n.length+"@@",n.push(f)):j?k==q&&"\n"==f.charAt(0)?(l&&(d=l,a(j,d,c)),j=k=l=null,m=0):f===k?m?l=d:a(j,d,c):f.match(/\n.*\n/)?(l&&(d=l,a(j,d,c)),j=k=l=null,m=0):"{"===f?m++:"}"===f&&m&&m--:f===q||"$$"===f?(j=d,k=f,m=0):"begin"===f.substr(1,5)&&(j=d,k="\\end"+f.substr(6),m=0)}return l&&a(j,l,c),c(i.join(""))}function c(a){return a=a.replace(/@@(\d+)@@/g,function(a,b){return n[b]}),n=null,a}function d(){p=!1,r.cancelTypeset=!1,r.Queue(["Typeset",r,g]),r.Queue(h)}function e(){p||(p=!0,r.Cancel(),r.Queue(d))}var f=Markdown.MathJax={},g=null;f.init=function(a,d){var e=a.getConverter();g=document.getElementById("wmd-preview"+d),e.hooks.chain("preConversion",b),e.hooks.chain("postConversion",c)};var h;f.onAsyncPreview=function(a){h=a,e()};var i,j,k,l,m,n,o=!1,p=!1,g=null,q="$",r=MathJax.Hub;r.Queue(function(){o=!0,r.processUpdateTime=50,r.Config({"HTML-CSS":{EqnChunk:10,EqnChunkFactor:1},SVG:{EqnChunk:10,EqnChunkFactor:1}})});var s,t=/(\$\$?|\\(?:begin|end)\{[a-z]*\*?\}|\\[\\{}$]|[{}]|(?:\n\s*)+|@@\d+@@)/i;s=3==="aba".split(/(b)/).length?function(a,b){return a.split(b)}:function(a,b){var c,d=[];if(!b.global){c=b.toString();var e="";c=c.replace(/^\/(.*)\/([im]*)$/,function(a,b,c){return e=c,b}),b=RegExp(c,e+"g")}for(var f=b.lastIndex=0;c=b.exec(a);)d.push(a.substring(f,c.index)),d.push.apply(d,c.slice(1)),f=c.index+c[0].length;return d.push(a.substring(f)),d},function(){var a=MathJax.Hub;if(!a.Cancel){a.cancelTypeset=!1,a.Register.StartupHook("HTML-CSS Jax Config",function(){var b=MathJax.OutputJax["HTML-CSS"],c=b.Translate;b.Augment({Translate:function(d,e){if(a.cancelTypeset||e.cancelled)throw Error("MathJax Canceled");return c.call(b,d,e)}})}),a.Register.StartupHook("SVG Jax Config",function(){var b=MathJax.OutputJax.SVG,c=b.Translate;b.Augment({Translate:function(d,e){if(a.cancelTypeset||e.cancelled)throw Error("MathJax Canceled");return c.call(b,d,e)}})}),a.Register.StartupHook("TeX Jax Config",function(){var b=MathJax.InputJax.TeX,c=b.Translate;b.Augment({Translate:function(d,e){if(a.cancelTypeset||e.cancelled)throw Error("MathJax Canceled");return c.call(b,d,e)}})});var b=a.processError;a.processError=function(c,d,e){return"MathJax Canceled"!==c.message?b.call(a,c,d,e):(MathJax.Message.Clear(0,0),d.jaxIDs=[],d.jax={},d.scripts=[],d.i=d.j=0,d.cancelled=!0,null)},a.Cancel=function(){this.cancelTypeset=!0}}}()}(),function(a){function b(a,b,c){this.tagName=a,this.anchor=b,this.text=c,this.children=[]}function c(d,e,f){function g(){void 0!==h&&(h.children.length>0&&(h.children=c(h.children,e+1)),j.push(h))}e=e||1;var h,i="H"+e,j=[];return a(d).each(function(){this.tagName!=i?e!==f&&(void 0===h&&(h=new b),h.children.push(this)):(g(),h=this)}),g(),j}function d(a){return a.toLowerCase().replace(/\s/g,"-").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function e(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function f(f,g){function h(a){for(var b=a.id||d(a.textContent)||"title",c=b,f=0;e(i,c);)c=b+"-"+ ++f;return i[c]=!0,a.id=c,c}var i={},j=[];return a(f).children("h1, h2, h3, h4, h5, h6").each(function(){j.push(new b(this.tagName,h(this),this.textContent))}),j=c(j,1,g),'<div class="toc">\n<ul>\n'+j.join("")+"</ul>\n</div>\n"}var g=Markdown.Toc={},h={marker:"\\[(TOC|toc)\\]",maxDepth:6};g.init=function(b,c,d){var d=a.extend({},h,d),e=document.getElementById("wmd-preview"+c);b.hooks.chain("onPreviewRefresh",function(){var b=new RegExp("^\\s*"+d.marker+"\\s*$"),c=f(e,d.maxDepth);a(e).children("p").each(function(){b.test(this.innerHTML)&&(this.innerHTML=c)})})},b.prototype.childrenToString=function(){if(0===this.children.length)return"";if(this.text){var b="<ul>\n";return a(this.children).each(function(){b+=this.toString()}),b+="</ul>\n"}var b="";return a(this.children).each(function(){b+=this.toString()}),b},b.prototype.toString=function(){if(!this.text)return this.childrenToString();var a="<li>";return this.anchor&&this.text&&(a+='<a href="#'+this.anchor+'">'+this.text+"</a>"),a+=this.childrenToString()+"</li>\n"}}(jQuery),MathJax.Hub.Config({skipStartupTypeset:!0,"HTML-CSS":{preferredFont:"TeX",availableFonts:["TeX"],linebreaks:{automatic:!0},EqnChunk:10,imageFont:null},tex2jax:{inlineMath:[["$","$"],["\\\\\\\\(","\\\\\\\\)"]],displayMath:[["$$","$$"],["\\\\[","\\\\]"]],processEscapes:!0},TeX:$.extend({noUndefined:{attributes:{mathcolor:"red",mathbackground:"#FFEEEE",mathsize:"90%"}},Safe:{allow:{URLs:"safe",classes:"safe",cssIDs:"safe",styles:"safe",fontsize:"all"}}}),messageStyle:"none"}),+function(a){"use strict";function b(){a("pre > code").each(function(){try{!this.highlighted&&hljs.highlightBlock(this),this.highlighted=!0}catch(a){}}),a("pre > code.language-sequence").each(function(){try{var a=Diagram.parse(this.textContent),b=this.parentNode,c=document.createElement("div");c.className="sequence-diagram",b.parentNode.replaceChild(c,b),a.drawSVG(c,{theme:"simple"})}catch(d){}}),a("pre > code.language-flow").each(function(){try{var a=flowchart.parse(this.textContent),b=this.parentNode,c=document.createElement("div");c.className="flow-chart",b.parentNode.replaceChild(c,b),a.drawSVG(c,{"line-width":2,"font-family":"sans-serif","font-weight":"normal"})}catch(d){}})}function c(b){return this.each(function(){var c=a(this),e=c.data("likedown"),f="object"==typeof b&&b;e||c.data("likedown",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.options.postfix=this.options.postfix||this.$element.data("postfix")||"",this.init()};d.VERSION="0.0.1",d.DEFAULTS={table_class:"table table-bordered",highlighter:"highlight",help:function(){window.open("http://likedown.chiki.org/")}},d.prototype.init=function(){{var b=this.converter=new Markdown.Converter,c=this.editor=new Markdown.Editor(b,this.options.postfix,{handler:this.options.help});this.preview=document.getElementById("wmd-preview"+this.options.postfix)}Markdown.Extra.init(b,this.options),Markdown.MathJax.init(c,this.options.postfix),Markdown.Toc.init(c,this.options.postfix,this.options.toc),c.hooks.chain("onPreviewRefresh",a.proxy(this.onPreviewRefresh,this)),c.hooks.chain("onPreviewRefresh",this.onAsyncPreview),c.hooks.set("insertLinkDialog",a.proxy(this.insertLinkDialog,this)),c.hooks.set("insertImageDialog",a.proxy(this.insertImageDialog,this)),c.run(),this.initModals()},d.prototype.initModals=function(){var b=this;a(".action-insert-link").click(function(){var c=a("#input-insert-link").val();void 0!==c&&(b.insertCallback(c),b.insertCallback=void 0)}),a(".action-insert-image").click(function(){var c=a("#input-insert-image").val();void 0!==c&&(b.insertCallback(c),b.insertCallback=void 0)}),a(".modal-insert-link, .modal-insert-image").on("hidden.bs.modal",function(){void 0!==b.insertCallback&&(b.insertCallback(null),b.insertCallback=void 0)})},d.prototype.resetModalInputs=function(){a("#input-insert-link, #input-insert-image").val("")},d.prototype.insertLinkDialog=function(b){return this.insertCallback=b,this.resetModalInputs(),a(".modal-insert-link").modal(),!0},d.prototype.insertImageDialog=function(b){return this.insertCallback=b,this.resetModalInputs(),a(".modal-insert-image").modal(),!0},d.prototype.onPreviewRefresh=function(){b(document.getElementById("wmd-preview"+this.options.postfix))};var e=[Markdown.MathJax.onAsyncPreview];d.prototype.onAsyncPreview=function(){function a(b){var c=b.length?b.shift():function(){};c(function(){a(b)})}a(e.concat([function(a){a()}]))};var f=a.fn.likedown;a.fn.likedown=c,a.fn.likedown.Constructor=d,a.fn.likedown.noConflict=function(){return a.fn.likedown=f,this},a(function(){a('[data-type="likedown"]').likedown(),b(),Markdown.MathJax.onAsyncPreview()})}(jQuery);